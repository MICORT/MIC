#!/usr/bin/env bash
# Push-to-Talk STT â€” GUI launcher
# Activates the venv, adds src/ to PYTHONPATH and starts the GTK4 app.
set -euo pipefail

VENV="${HOME}/stt-env"
SRC_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")/src" && pwd)"

# Activate venv (makes Python + installed packages available)
source "${VENV}/bin/activate"

# Make the ptt_gui package importable without a pip install
export PYTHONPATH="${SRC_DIR}${PYTHONPATH:+:${PYTHONPATH}}"

# Ensure UTF-8 locale for Polish characters
export LANG="${LANG:-C.UTF-8}"
export PYTHONIOENCODING=utf-8

exec python3 -m ptt_gui.app "$@"
